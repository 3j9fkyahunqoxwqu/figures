<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>CSS Figures</title>
<link href="http://www.whatwg.org/style/specification" type="text/css" rel="stylesheet">
<link href="http://www.whatwg.org/style/specification" type="text/css" rel="stylesheet">

<style>
.head h1 { padding: 1em 0 }
span.minor { letter-spacing: 0; color: black; font-size: 0.8em; font-weight: normal }

div.example {
  border-left: 0.3em solid black;
  margin: 0;
}
.code-example {
  text-align: right;
  float: left;
  width: 6em;
  margin-left: -7em;
}
a { text-decoration: none }
a.pass { color: green }
a.fail { color: red }
a.unclear, a.almost { color: orange }
.issue { background: #FAA; padding: 0.3em 0.4em }
.issue::before { content: "Issue: " }
pre.lineart { line-height: 1 }
.example img { display: block }
h2 { clear: both }
</style>

<body class="draft">

<div class="head">
  <p><a href="http://www.whatwg.org/" class="logo"><img width="100" alt="WHATWG" height="100" src="http://resources.whatwg.org/logo.svg"></a></p>
	<h1>CSS Figures</h1>
	
	<h2 class="no-num no-toc" id="living-standard-last-updated-2-april-2014">Living Standard — Last Updated 2 April 2014</h2>
	
	<dl>
		<dt>This version:
		<dd><!--begin-link--><a href="http://figures.spec.whatwg.org/">http://figures.spec.whatwg.org/</a><!--end-link-->
		
	
		<dt>Editor:
		<dd class="vcard">
			<span class="fn">Håkon Wium Lie</span>,
			<span class="org">Opera Software</span>,
			<span class="email">howcome@opera.com</span>

		<dt>Participate:</dt>
		<dd><a href="http://www.whatwg.org/mailing-list">whatwg@whatwg.org</a></dd>
		<dd><a href="http://lists.w3.org/Archives/Public/www-style/">www-style@w3.org</a></dd>
<dd><a href="https://www.w3.org/Bugs/Public/enter_bug.cgi?product=WHATWG&amp;component=Figures">file a bug</a> (<a href="https://www.w3.org/Bugs/Public/buglist.cgi?product=WHATWG&amp;component=Figures&amp;resolution=---">open bugs</a>)</dd>


	</dl>
	
<p class="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img src="http://i.creativecommons.org/p/zero/1.0/80x15.png" alt="CC0"></a>To the extent possible under law, the editor has waived all copyright and related or neighboring rights to this work. In addition, as of 2 April 2014, the editor has made this specification available under the
<a href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>, which is available at <!--begin-link--><a href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0">http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0</a><!--end-link-->.

</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

<p>This specification describes how common figures ‐ as in tables, photographs, or drawings with captions ‐ can be formatted with CSS in ways traditionally used in printing. Using functionality from this specification, figures can be floated wrt. columns and pages, and they can be made to span columns. One can also specify that text should wrap around text and images. 

<h2 class="no-num no-toc" id="status">Status</h2>

<p>This specification is in the process of establishing itself in WHATWG. As such, the term "Living Standard" indicates a goal, rather than reality. However, many features described in this specification have already been implemented, as documented <a href="http://people.opera.com/howcome/2013/tests/figures/coverage.html">here</a>

<h2 class="no-num no-toc" id="table-of-contents">Table of Contents</h2>


<!--begin-toc-->
<ol class="toc">
 <li><a href="#goals" class="no-num">Goals</a></li>
 <li><a href="#conformance"><span class="secno">1 </span>Conformance</a></li>
 <li><a href="#page-floats"><span class="secno">2 </span>Page floats</a>
  <ol>
   <li><a href="#floating-to-the-top-bottom:-float"><span class="secno">2.1 </span>Floating to the top/bottom: 'float'</a></li>
   <li><a href="#snapping-to-nearest-edge:-snap"><span class="secno">2.2 </span>Snapping to nearest edge: snap()</a></li>
   <li><a href="#setting-the-page-float-reference:-float-reference"><span class="secno">2.3 </span>Setting the page float reference: 'float-reference'</a></li>
   <li><a href="#deferring-page-floats"><span class="secno">2.4 </span>Deferring page floats</a>
    <ol>
     <li><a href="#float-defer-column"><span class="secno">2.4.1 </span>'float-defer-column'</a></li>
     <li><a href="#float-defer-page"><span class="secno">2.4.2 </span>'float-defer-page'</a></li>
     <li><a href="#float-defer-line"><span class="secno">2.4.3 </span>'float-defer-line'</a></ol></li>
   <li><a href="#clearing-page-floats"><span class="secno">2.5 </span>Clearing page floats</a></li>
   <li><a href="#avoiding-content-after-page-floats"><span class="secno">2.6 </span>Avoiding content after page floats</a></li>
   <li><a href="#overconstrained-page-floats"><span class="secno">2.7 </span>Overconstrained page floats</a></ol></li>
 <li><a href="#extending-floats"><span class="secno">3 </span>Extending floats</a>
  <ol>
   <li><a href="#floating-inside-and-outside-pages"><span class="secno">3.1 </span>Floating inside and outside pages</a></li>
   <li><a href="#float-offset"><span class="secno">3.2 </span>float-offset</a></li>
   <li><a href="#spanning-columns:-column-span"><span class="secno">3.3 </span>Spanning columns: 'column-span'</a></ol></li>
 <li><a href="#combo-floats"><span class="secno">4 </span>Combo floats</a>
  <ol>
   <li><a href="#page-float-policy"><span class="secno">4.1 </span>Page float policy</a></ol></li>
 <li><a href="#wrapping-around-page-floats-and-other-elements"><span class="secno">5 </span>Wrapping around page floats (and other elements)</a>
  <ol>
   <li><a href="#wrap-side"><span class="secno">5.1 </span>wrap-side</a></li>
   <li><a href="#wrap-contrast"><span class="secno">5.2 </span>wrap-contrast</a></ol></li>
 <li><a href="#pullquotes"><span class="secno">6 </span>Pullquotes</a></li>
 <li><a href="#references" class="no-num">References</a></li>
 <li><a href="#acknowledgments" class="no-num">Acknowledgments</a></ol>
<!--end-toc-->


<h2 class="no-num" id="goals">Goals</h2>

<p>The main goal of this specification is to enable authors to create publications — on paper, on screens, and in PDLs — that present figures in common ways. 

<h2 id="conformance"><span class="secno">1 </span>Conformance</h2>

<p>All diagrams, examples, and notes in this specification are
non-normative, as are all sections explicitly marked non-normative.
Everything else in this specification is normative.

<p>The key words "MUST", "MUST NOT", "REQUIRED", <!--"SHALL", "SHALL
NOT",--> "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
"OPTIONAL" in the normative parts of this specification are to be
interpreted as described in RFC2119. For readability, these words do
not appear in all uppercase letters in this specification.
<a href="#refsRFC2119">[RFC2119]</a>

<p>Conformance requirements phrased as algorithms or specific steps
may be implemented in any manner, so long as the end result is
equivalent.

<p id="hardwareLimitations">User agents may impose
implementation-specific limits on otherwise unconstrained inputs,
e.g. to prevent denial of service attacks, to guard against running
out of memory, or to work around platform-specific limitations.


<h2 id="page-floats"><span class="secno">2 </span>Page floats</h2>

<p>In page-based layouts, images and figures are often displayed at
the top or bottom of pages, spanning several columns. This
specification extends the CSS float model with <em>page floats</em>,
which are floats that primarily move in the block direction, as
opposed to normal CSS float that primarily move in the inline
direcdtion. The 'float' property is used to specify that the page
float should move to the top, bottom or to the nearest edge of the
column.

<p>By default, page floats are contained by their <dfn id="natural-column">natural column</dfn>,
i.e., the column where the element would naturally start. All visible
elements have at least one column. Elements that are split over
several pages will have several columns, and multicol elements can
have several columns on the same page. Columns exist in both paged and
continous media, and page floats can therefore also be used in
scrolled enviroments.

<!--
<p>Each page float has a <em>natural column</em>, which is the column
where the start of the element would have been if it was not floated.
Also, each page float has a <em>natural page</em>, which is the page
where the element would have started if the was not a float. Unless
constrained by lack of space or settings on other float-* properties, page
floats should appear in their natural column on the natural page.

<!--As such, <em>column float</em> may be a more accurate term, but column   than page floats. However, most columns will be contained by the page area, and this sp for page floats may be <em>column
floats</em> as all of them are constrained by the column box. However,
in most cases, page floats seems like a better term.-->

<p>The page float's conataining block can be extended by the
'column-span' property. A typical use case is to make the page float
span two columns, but parts of columns or column gaps can also be
specified.

<p>Page floats can be told to escape their natural column by
using the 'float-reference' property to set the containing block to
be an element, the page area, or the bleed box.

<p>Another way to escape the natural column is to defer placement to a
later column, perhaps on a lager page, by using the
'float-defer-column' and 'float-defer-page' properties. These
properties identify a page float's <dfn id="defer-column">defer column</dfn> on a <dfn id="defer-page">defer
page</dfn>.

<p>Like for normal floats, elements can be set to clear page floats
through 'clear: column'.

<p>These properties allow rich designs to be described. However, there
may be implementation-specific limits for figure placement (such that
figures cannot affect content that has already been laid out), or that
blank pages should be avoided. In these cases, UAs may move the page
float to another column or page. The column where the page float is
shown is called the <dfn id="resulting-column">resulting column</dfn>, and the page where
the page float is shown is called the <dfn id="resulting-page">resulting page</dfn>.

<!--

Page floats can be set to span several columns with new values on the 'column-span' property. New values on the 'clear' property
adds further ways of refining layouts with page floats.

<p class=note>Not all multicol elements are constrained by the page
box. Therefore, a more accurate term for page floats may be <em>column
floats</em> as all of them are constrained by the column box. However,
in most cases, page floats seems like a better term.

<!--

<a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-float">'float'</a> <span data-anolis-ref>CSS</span>
property to create <em>page floats</em>.
-->


<h3 id="floating-to-the-top-bottom:-float"><span class="secno">2.1 </span>Floating to the top/bottom: 'float'</h3>

<p>These new keywords on 'float' have been added:

<dl>

<dt>top
<dd>The page float is moved to the top of its column, i.e., to the beginning (in the block direction) of its <em>defer column</em>. If other page floats have already taken the top position, the float is stacked below or moved to the top of another column (see <a href="#clearing-page-floats">Clearing Page floats</a> below).

<dt>block-start
<dd>alias for 'top' (<span class="issue">should 'before' also be an alias?</span>)

<dt>bottom
<dd>The page float is moved to the bottom of its column, i.e., to the end (in the block direction) of its <em>defer column</em>. If other page floats have already taken the bottom position, the float is stacked above or moved to the bottom of another column (see <a href="#clearing-page-floats">Clearing Page floats</a> below).

<dt>block-end
<dd>alias for 'bottom' (<span class="issue">should 'after' also be an alias?</span>)

<dt>top-bottom
<dd>The page float is moved to the top of its column, i.e., to the beginning (in the block direction) of its <em>defer column</em>. If that position is not possible (due to 'column: clear' being set, or due to lack of space), other possibilities are tried in order: the bottom of its column, the top of the next column, the bottom of the next column, etc.

<dt>block-start-end
<dd>alias for 'top-bottom'

<dt>bottom-top
<dd>The page float is moved to the bottom of its column, i.e., to the end (in the block direction) of its <em>defer column</em>. If that position is not possible (due to 'column: clear' being set, or due to lack of space), other possibilities are tried in order: the bottom of its column, the top of the next column, the bottom of the next column, etc.

<dt>block-end-start
<dd>alias for 'bottom-top'

</dl>

<p>When one of these keywords are set, a page float is created. 

<div class="example">
<p>In this example, the figure is floated to the top of its column:

<pre>figure { float: top }
</pre>
<img src="7.png" alt="sample rendering">
</div>

<p>The column is, by default, the containing block of the page float.
When the width is auto, the page float will fill the width of the
column. When the width is constrained, content will be laid out in the
inline direction. No other content is allowed to run around the page
float.


<div class="example">
<p>In this example, the width of the figure is constrained and its width computed relative to the column width.

<pre>figure { float: top; width: 50% }
</pre>
<img src="7b.png" alt="sample rendering">
</div>

<p>The margin of the <dfn id="page-float-extreme-edge">page float extreme edge</dfn> (i.e., the edge of the page float that ends up adjoining the column edge) is always set to zero, so that page floats align with content in other columns. 

<p class="note">In the future, other content may be allowed to run around page floats.</p>

<h3 id="snapping-to-nearest-edge:-snap"><span class="secno">2.2 </span>Snapping to nearest edge: snap()</h3>

<p>Figures that naturally end up close to a column break may look better when moved to the top or bottom of the column. To support this, the <code>snap</code> value is added to the 'float' property:

<dl>

<dt>snap(&lt;length&gt; &lt;length&gt;? [, top | bottom | near ]?)

<dd>Turns the element into a page float if it naturally appears within a certain distance from the top or bottom of the column. The optional length value(s) specifies the maxium distance from the top/bottom that an element must be within in order to become a page float. When one length value is specified, it represents distance from both the top and the bottom; when two length values are specified, they represen the distance from top and bottom, respectively. Integer values represent number of lines in the baseline grid, if set. If no baseline grid is set, integer values represent multiples of the used value of 'line-height' on the element itself. 

<p>The optional keyword value specifies where the element is floated: top, bottom, or the nearest of the two. The default value is 'near'. If 'near' is in effect and the element is within the specified distance both from the top and the bottom, bottom wins.

<dt>snap

<dd>same as <code>snap(2, near)</code>

</dl>

<p class="issue">Should an element be considered to be a float if it has a snap() value, even if the element does not appear within the specified distance? This way, it can be determined whether an element is float or not without laying out the document.


<div class="example">
<p>In this example, a figure naturally appears close to a column break. There is not enough space for the figure in the first column, and it is therefore placed in the second column, leaving white space at the bottom of the first column.</p>

<img src="23.png" alt="sample rendering">

<p>To avoid the white space, the image can be floated to the nearest edge (in the block direction):</p>

<pre>.figure { float: snap }
</pre>

<p>In this example, the figure is already at the nearest edge, so it does not move. However, page floats allow subsequent content to be displayed before the page float and the white space can therefore be filled:</p>

<img src="7.png" alt="sample rendering">
</div>

<div class="example">

<p>In this example, two figures naturally appear in the text flow:</p>

<img src="20.png" alt="sample rendering">

<p>A typographer would typically try to avoid single lines of text above/below figures, which can be achieved with:

<pre>div.figure { float: snap(1) }
</pre>

<p>The length value specifies the reach of the snap function; in this example the second figure is affected, but not the first.
</div>


<div class="example">

<p>In this example, two figures naturally appear in the text flow:</p>

<img src="20.png" alt="sample rendering">

<p>To make both figures snap to the nearest edges, this code can be applied:

<pre>div.figure { float: snap(3em) }
</pre>

<p>The resultant rendering is:</p>

<img src="22.png" alt="sample rendering">

</div>


<div class="example">

<p>In this example, two figures naturally appear in the text flow:</p>

<img src="20.png" alt="sample rendering">

<p>To make both figures snap to the nearest edges, this code can be applied:

<pre>div.figure { float: snap(3, bottom) }
</pre>

<p>The resultant rendering is:</p>

<img src="17.png" alt="sample rendering">

</div>

<p>To determine the exact meaning of 'near', the Japanese layout requirements document should be consulted.

<!--http://www.w3.org/TR/jlreq/#basic_ideas_about_illustration_positioning_in_JISX4051-->


<!--
<div class=example>
<p>In this example, tables will snap to the top/bottom if the top/bottom of the border box is closer than '3em' from the top/bottom of the page/column.

<pre>
table { float: snap }
table { float: snap(3em) }
table { float: snap(3em, bottom) }
table { float: snap(3em 2em, bottom) }
</pre>
</div>
-->



<h3 id="setting-the-page-float-reference:-float-reference"><span class="secno">2.3 </span>Setting the page float reference: 'float-reference'</h3>

<p>Normally, page floats are moved to the top or bottom of a column, and the column is the contaning block of the page float, called a <dfn id="float-reference">float reference</dfn>. In some cases it is necessary to change the float reference to be an element, the page area, or the bleed box. This is possible with the 'float-reference' property.

<table class="propdef">
    <tr>
      <td><em>Name:</em>
      <td><dfn id="float-reference-0">float-reference</dfn>
    <tr>
      <td><em>Value:</em>
      <td>column | element | page | bleed-box  <!-- sheet | spread -->
    <tr>
      <td><em>Initial:</em>
      <td>column
    <tr>
      <td><em>Applies to:</em>
      <td>page floats
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed value:</em>
      <td>Same as specified value
</table>

<p>This property indicates the float reference for a page float. The values are:

<dl>
<dt>column
<dd>the <em>resulting column</em> is the float reference

<dt>element
<dd>the float reference is the youngest acestor element that creates a block formatting context

<dt>page 
<dd>the page area of the <em>resulting page</em> is the float reference

<dt>bleed-box
<dd>The bleed box of the <em>resulting page</em> is the float reference. The extent of the bleed box is described by the <a href="http://dev.w3.org/csswg/css-page/#bleed">bleed</a> property.

<!--
<dt>spread
<dt>spreadsheet
-->
</dl>


<div class="example">
<p>In this example, the footer is floated to the bottom of the page:

<pre>footer { float: bottom; float-reference: page }

&lt;article&gt;
  ...
  &lt;footer&gt;...&lt;/footer&gt;
&lt;/article&gt;
</pre>

<p>The resultant rendering could be:

<pre class="lineart">  ┌──────────┬┬──────────┬┬──────────┐
  │          ││          ││          │
  │ column 1 ││ column 2 ││ column 3 │
  │          ││          ││          │
  ├──────────┴┴──────────┴┴──────────┤
  │                                  │
  │      blank area                  │&lt;-page box
  │                                  │
  ├──────────────────────────────────┤
  │ footer                           │
  └──────────────────────────────────┘
</pre>
</div>

<p>Column rules are not displayed in areas described by 'column-span'. 

<div class="example">
<p>In this example, the footer is floated to the bottom of the column, and is set to span all columns:

<pre>footer { float: bottom; float-reference: column; column-span: all }

&lt;article&gt;
  ...
  &lt;footer&gt;...&lt;/footer&gt;
&lt;/article&gt;
</pre>

<p>The resultant rendering could be:

<pre class="lineart">┌──────────────────────────────────────┐
│ ┌──────────┬┬┬─────────┬┬┬─────────┐ │
│ │          │││         │││         │ │
│ │     1    │││    2    │││   3     │ │   
│ │          │││         │││         │ │
│ ├──────────┴┴┴─────────┴┴┴─────────┤ │
│ │ footer                           │ │
│ ╘══════════════════════════════════╛ │
│                                      │
│                                      │
│                                      │
└──────────────────────────────────────┘
</pre>

<p>The double line below the footer indicates that the columns stretch to below the footer element. Note that column rules are not displayed under the area described by column spans.

</div>

<div class="example">
<p>In this example, the <code>article</code> element acts as the float reference:

<pre>footer { float: bottom; float-reference: element }
article { columns: 3 }

&lt;article&gt;
  ...
  &lt;footer&gt;...&lt;/footer&gt;
&lt;/article&gt;
</pre>

<p>In the resultant rendering, the footer is shown after the
columns on the last page of the <code>article</code> element:

<pre class="lineart">┌──────────────────────────────────────┐
│ ┌──────────┐┌──────────┐┌──────────┐ │
│ │          ││          ││          │ │
│ │     1    ││    2     ││    3     │ │   
│ │          ││          ││          │ │
│ ├──────────┴┴──────────┴┴──────────┤ │
│ │ footer                           │ │
│ ╘══════════════════════════════════╛ │
│                                      │
│                                      │
│                                      │
└──────────────────────────────────────┘
</pre>
</div>


<div class="example">

<p>In this example, the full-page ad uses the bleed box as the referece. Thus, when the image width and height are set to 100%, the image will extend slightly outside the page box on all sides. Exactly how much depends on the value of the <a href="http://dev.w3.org/csswg/css-page/#bleed">bleed</a> property.

<pre>aside.top-ad { 
  float: top; 
  float-reference: bleed-box;
  float-defer-page: 3;
}
aside.top-ad img { 
  width: 100%; height: 100%;
  object-fill: fill;
}

&lt;aside class=full-page-ad&gt;
  &lt;img&gt;
&lt;/aside&gt;
</pre>
</div>

<div class="example">

<p>In this example, a figure fills the upper half of the page to its bleeding edge. 

<p>In the rendering below, the stippled line indicates the bleed box, the green rectangle is the <code>aside</code> element which is aligned with the bleed box on the top, right and left. The black solid line is the page box.

<pre><span style="color: green"> 
 ┌──────────────────────────────────────────┐
 │                                          │
 │                                          │
 │                                          │
 │                                          │
 │                                          │
 │                                          │
 │                                          │
 └──────────────────────────────────────────┘</span>
 │ │                                      │ │
   │                                      │ 
 │ │                                      │ │
   │                                      │ 
 │ │                                      │ │
   └──────────────────────────────────────┘ 
 └  ──  ──  ──  ──  ──  ──  ──  ──  ──  ──  ┘ 

<pre></pre></pre></div>


<h3 id="deferring-page-floats"><span class="secno">2.4 </span>Deferring page floats</h3>

<p>A page float can be deferred to a following column or page with two
new properties described in this section. After applying these
properties, the page float's <em>defer column</em> is identified.
These properties are evaluated before the 'clear' property.

<h4 id="float-defer-column"><span class="secno">2.4.1 </span>'float-defer-column'</h4>

<table class="propdef">
    <tr>
      <td><em>Name:</em>
      <td><dfn id="float-defer-column-0">float-defer-column</dfn>
    <tr>
      <td><em>Value:</em>
      <td>none | &lt;integer&gt; | last
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>page floats
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed value:</em>
      <td>specified value
</table>

<p>This property specifies a <em>defer column</em>, which is a later column where the formatter will try to place the page float. Values are:

<dl>
<dt>none

<dd>the natural column is the defer column

<dt>&lt;integer&gt;

<dd>A positive integer indicates that the page float is deferred by the specified number of columns. If the number results in column that does not exist, the last column should be attempted. A negative integer indicates that the page float is deferred by counting from the last column; -1 means the last column, -2 means the next-to-last column, etc. If the specified negative integer would result the defer column being a previous column, the value is ignored. Also, zero is ignored. <!--Integer values only have effect when the page float is shown on its natural page; on other pages the defer column will be the first column on the page.-->

<dt>last

<dd>The last column on the natural page becomes the defer column. <!--If the page float cannot be shown on its natural page, this keyword still has effect (unlike integer values).-->

</dl>


<h4 id="float-defer-page"><span class="secno">2.4.2 </span>'float-defer-page'</h4>

<table class="propdef">
    <tr>
      <td><em>Name:</em>
      <td><dfn id="float-defer-page-0">float-defer-page</dfn>
    <tr>
      <td><em>Value:</em>
      <td>[ &lt;integer&gt; || last || [left | right] ] | none
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>page floats
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed value:</em>
      <td>specified value
</table>

<p>This property specifies a <em>defer page</em>, which is a later column where the formatter will try to place the page float. Values are:

<dl>
<dt>none
<dd>the defer page is the natural page

<dt>&lt;integer&gt;
<dd>A positive integer indicates that the page float is deferred by the specified number of pages. A negative integer indicates that the page float is deferred by counting from the last page; -1 means the last page, -2 means the next-to-last page, etc. If the specified negative integer would result the defer page being a page column, the value is ignored. Also, zero is ignored. 

<p class="issue">Should negative values be allowed?

<dt>left
<dd>A left page is requested. If pages are not categorized as left of right, this value is ignored. In combination with an integer, this keyword has the effect that the defer page is increased by one, unless the integer value results in a left page. 

<dt>right

<dd>A left page is requested. If pages are not categorized as left of right, this value is ignored. In combination with an integer, this keyword has the effect that the defer page is increased by one, unless the integer value results in a right page. 

<dt>last


<dd>The last page becomes the defer page. In combination with 'left', this value means next-to-last unless the last page is a left page. In combination with 'right', this value means next-to-last unless the last page is a right page.

</dl>


<div class="example">
<p>Float figure to the top of the column that follows the natural column:

<pre>figure { float: top }
figure { float-defer-column: 1 }
</pre>
</div>

<div class="example">
<p>Float figure to the top of the next-to-last column:

<pre>figure { float: top; float-defer-column: -1 }
</pre>
<img src="7.png" alt="sample rendering">
</div>

<div class="example">
<p>Float figure to top of the last column of the multicol element on the current page:
<pre>figure { float: top; float-defer-column: last }
</pre>
<img src="6.png" alt="sample rendering">
</div>


<div class="example">
<p>In combination with 'column-span', the figure is floated to the top corner of the multicol element on that page:
<pre>figure { float: top; column-span: 2; float-defer-column: last }
</pre>
<img src="8.png" alt="sample rendering">
</div>


<div class="example">
<p>Float figure to the second column on the next page, spanning two columns:

<pre>figure { 
  float: top; 
  column-span: 2;
  float-defer-page: 1;
  float-defer-column: 1;
}
</pre>

<p>The next page may look like this:

<img src="18.png" alt="sample rendering">

</div>

<div class="example">
<p>Float figure to the top right, leaving the last column unchanged:

<pre>figure { 
  float: top; 
  column-span: 2;
  float-defer-column: -1;
}
</pre>

<img src="18.png" alt="sample rendering">

<p>Given that there are four columns, and that the figure is referenced at the beginning of its multicol element, the same layout could be achieved with this code:

<pre>figure { 
  float: top; 
  column-span: 2;
  float-defer-column: 1;
}
</pre>

</div>


<div class="example">
<p>Float figure to the top of the first column on the next-to-last page:

<pre>figure { float: top }
figure { float-defer-page: -1 }
</pre>
</div>

<div class="example">
<p>Float figure to the top of the next-to-last column on the next-to-last page:

<pre>figure { float: top }
figure { float-defer-column: -1 }
figure { float-defer-page: -1 }
</pre>
</div>


<div class="example">
<p>Float figure to the top of the last column on the natural page:

<pre>.figure { float: top }
.figure { float-defer-column: last }
</pre>

<img src="6.png" alt="sample rendering">
</div>

<div class="example">
<p>Float figure to the last column on the last page:

<pre>.figure { float: top }
.figure { float-defer-column: last }
.figure { float-defer-page: last }
</pre>

</div>


<h4 id="float-defer-line"><span class="secno">2.4.3 </span>'float-defer-line'</h4>


<table class="propdef">
    <tr>
      <td><em>Name:</em>
      <td><dfn id="float-defer-line-0">float-defer-line</dfn>
    <tr>
      <td><em>Value:</em>
      <td>none | &lt;integer&gt; | &lt;percentage&gt;
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>page floats
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>relative to height of column
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed value:</em>
      <td>specified value
</table>

<div class="example">
<pre>.pullquote { 
  float: top outside;
  float-defer-column: last; 
  float-defer-line: 50%;
  float-offset: -50%;
}
</pre>
</div>


<h3 id="clearing-page-floats"><span class="secno">2.5 </span>Clearing page floats</h3>

<p>Elements may request to clear page floats with the 'clear' property:

<!--, or to be the first page float on a page/column through new values on the 'clear' property:-->

<dl>

<dt>column

<dd>The page float requests to be the first page float at its favored position in the column; rather than being stacked after other page floats, it should be moved to the next possible position. 


<!--<dt>top

<dd>The page float requests to be the first page float at the top of the column. If there is already a page float at the requested position, the page float is moved to the next column. 

<dt>bottom

<dd>The page float requests to be the first page float at the bottom of the column. If there is already a page float at the requested position, the page float is moved to the next column. 
-->

<dt>page

<dd>The page float requests to be the first page float on the page. If there is already another page float on the page, the page float is moved to the next page.


</dl>

<p>The placement process is iterative; if the requested position cannot be honored, the page float the next possible position is tried, etc.

<!-- issue: first vs only -->

<div class="example">
<p>In this example, the two figures may appear in the same column:
<pre>figure { float: bottom; clear: none }

&lt;figure&gt;&lt;/figure&gt;
&lt;figure&gt;&lt;/figure&gt;
</pre>
<img src="16.png">

<p>The first figure will appear at the bottom of the column, the second will appear above the first.
</div>

<div class="example">
<p>In this example, the two figures will appear in different columns:
<pre>figure { float: bottom; clear: column }

&lt;figure&gt;...&lt;/figure&gt;
&lt;figure&gt;...&lt;/figure&gt;
</pre>
<img src="17.png">
</div>

<div class="example">
<p>In this example, the first figure will move to the top of its natural column, while the second will move to the bottom: 

<pre>figure { float: top-bottom; clear: column }

&lt;figure&gt;...&lt;/figure&gt;
&lt;figure&gt;...&lt;/figure&gt;
</pre>
<img src="32.png">

<p>The placement of the second float is due to the 'top-bottom' indicating that the bottom as an acceptable position, and due to it being the first page float in the bottom position. 
</div>



<div class="example">
<p>In this example there are three figures, all requesting to be the first page float in their favored position. The first figure will move to the top of its natural column, the second will move to the next-best position, which is the bottom of the natural column. The third-best position is the top of the next column, which is where the third figure will be placed.

<pre>figure { float: top-bottom; clear: column }

&lt;figure&gt;...&lt;/figure&gt;
&lt;figure&gt;...&lt;/figure&gt;
&lt;figure&gt;...&lt;/figure&gt;
</pre>
<img src="33.png">

</div>


<div class="example">
<p>In this example, the two figures will appear in different columns due to clearing:
<pre>figure { float: bottom; clear: column }

&lt;figure&gt;...&lt;/figure&gt;
&lt;figure&gt;...&lt;/figure&gt;
</pre>
<img src="17.png">
</div>


<div class="example">
<p>In this example, the two figures end up the top corner of two different pages due to clear being set, and that 'last' has effect on all pages:
<pre>figure { float: top; float-defer-column: last; clear: column }

&lt;figure&gt;...&lt;/figure&gt;
&lt;figure&gt;...&lt;/figure&gt;
</pre>
</div>

<!--

<div class=example>
<p>Consider this code:
<pre>
figure { float: top }

&lt;figure>...&lt;/figure>
&lt;h1>Heading&lt;/h1>
</pre>

<p>which results in a content being laid out like this, before the content is distributed to its columns

<img src=34.png>

<p>When the figure is floated to the top, it may end up in column one (if the implementation is able to change previously laid-out content), or in column two. In the latter case, there will be room for the heading at the bottom of the first column. However, this placement is not optimal as the heading will be shown before the end of the preceding section (amongst other reasons). To make sure the heading is shown before the figure, the following code can be applied:

<pre>
h1 { clear: column }
</pre>

<p class=issue>Is this enough? Do we need another value on 'clear' to express this? 

</div>

-->

<h3 id="avoiding-content-after-page-floats"><span class="secno">2.6 </span>Avoiding content after page floats</h3>

<p>Page floats can request that subsequent content is avoided by
setting margin values in the block direction to 'auto'.

<div class="example">
<pre>  img { 
    float: top;
    margin-bottom: auto;
  }
</pre>

<img src="40.png" alt="sample rendering">

</div>



<!--
<h2>Page and column floats, alternative syntax</h2>

<p>This section describes an alternative syntax for page and column floats.

<p>Four new keywords on 'float' have been added:

<dl>

<dt>left, right, top, bottom
<dd>relative to physical viewport

<dt>line-left, line-right
<dd>relative to inline axis

<dt>before, after
<dd>relative to block direction

<dt>inside, outside
<dd>as described in the previous section

<dt>footnote
<dd>as described above

<dt>columns(n)
<dd>makes the float span n columns, and sets the float context to be the multicol element

<dt>page
<dd>sets the float context to be the page

</dl>



<div class=example>
<p>Float figure to the top right corner of the multicol element, spanning two columns:

<pre>
.figure { float: top rigth columns(2); width: 100% }
</pre>

<img alt="sample rendering" src=8.png>
</div>

<div class=example>
<p>Float figure to top of the last column of the multicol element on the current page:
<pre>
.figure { float: top right columns(1) }
</pre>

<img alt="sample rendering" src=6.png>
</div>

<div class=example>
<p>Float figure to the top right of the current element, allowing other content on its side:

<pre>
.figure { float: top right; width: 60% }
</pre>
<img alt="sample rendering" src=13.png>
</div>


<div class=example>
<p>Escape the multicol element and float to the top right of the page area:

<pre>
.figure { float: top right page }
</pre>
</div>

-->



<h3 id="overconstrained-page-floats"><span class="secno">2.7 </span>Overconstrained page floats</h3>

<p>The properties described above allow rich designs to be described.
However, in many cases page floats must be moved to another column or
page than specified. This may be due to implementation-specific limits
for figure placement (such that figures cannot affect content that has
already been laid out), or that there simply isn't room in the column
specified. UAs are free to find the best resulting column and page. 

<p>When resolving over-constrained layouts, the order of importance for defined goals are:

<ol>
<li>honor basic multi-column layout ('columns', 'column-span: all', 'column-gap' etc)
<li>avoid overlapping content; rather, move the page float to the next possible position
<li>honor 'column-span: &lt;integer&gt;'
<li>honor 'float-defer-page'
<li>honor 'float-defer-column'
<li>honor 'clear: column'
<li>honor 'float: top/bottom/top-bottom/bottom-top/clear'
<li>display all content (as described by other CSS properties)
<li>keep the number of pages to a minimum
<li>place the page float as close to its natural position as possible
<li>display content in the document order
<li>avoid pages with only page floats
</ol>

<div class="example">The number of columns is limited, and high values therefore cannot be honored. As a result, the last column on the natural page is tried instead.

<pre>.figure { float: top; float-defer-column: 1000 }
</pre>
</div>

<div class="example">A narrow screen may only have room for one column, in which case this request cannot be honored. As a result, the natural column should be tried instead.

<pre>.figure { float: top; float-defer-column: -5 }
</pre>
</div>

<div class="example">In long documents with many paragraphs, all paragraphs will not fit on the last page. Therefore, the last declaration in this example cannot be honored and must be ignored:
<pre>p { float: top; float-defer-page: last }
</pre>
</div>

<div class="example">Consider this code:

<pre>.one { float: top; float-defer-page: last; column-span: all }
.two { float: top; clear: column }

&lt;div class=one&gt;&lt;/div&gt;
&lt;div class=two&gt;&lt;/div&gt;
</pre>

<p>If all content fits on one page, the first page will also be the last page. The first element is processed first and is placed on top of the first/last page. Then the second element is processed. It requests a clear top, something which is not possible on the first page. Therefore, a second page is created and the second element is moved there, while the first element remains on the first page. Thus, even if the first element requests to be on the last page, it will not appear there.
</div>




<!--
<p>Page floats are processed in the order they appear in the source. However, the resulting visual order of page floats may be different from the source order. 

<div class=example>Consider this code:

<pre>
.one { float: top; float-defer-page: last; column-span: all }
.two { float: top; clear: column }

&lt;div class=one>&lt;/div>
&lt;div class=two>&lt;/div>
</pre>

<p>In this example, the first element requests to appear on the last page, while the second element requests to appear in the natural column. If the natural column of the second element appears on a page before the last page, the second element will appear visually before the first. 

</div>
-->

<h2 id="extending-floats"><span class="secno">3 </span>Extending floats</h2>

<h3 id="floating-inside-and-outside-pages"><span class="secno">3.1 </span>Floating inside and outside pages</h3>

<p>To allow content to flow to the inside and outside of a page, two new keywords are added to the 'float' property:

<dl>

<dt>inside
<dd>On a right page, this value is synonymous with 'left'. On a left page, this value is synonymous with 'right'.

<dt>outside
<dd>On a left page, this value is synonymous with 'left', On a right page, this value is synonymous with 'right'.

</dl>

<p>These new values do not create page floats, the are simply aliases for 'left' and 'right'.

<div class="example">
<pre>.figure { float: outside }
</pre>
</div>

<p class="issue">Should there be a way to combine float: top/bottom with left/right?

<p class="note">From here on, the spec is quite experimental. There be devils in details.</p>



<h3 id="float-offset"><span class="secno">3.2 </span>float-offset</h3>

<div class="example">
<pre>float: outside;
float-offset: -3em;
</pre>
</div>


<h3 id="spanning-columns:-column-span"><span class="secno">3.3 </span>Spanning columns: 'column-span'</h3>

<p>This specification adds number, length, and the 'auto' value to the
'column-span' property so that elements can span several columns. The
new definition is:

<table class="propdef">
    <tr>
      <td><em>Name:</em>
      <td><dfn id="column-span">column-span</dfn>
    <tr>
      <td><em>Value:</em>
      <td>none | all | &lt;number&gt; | &lt;length&gt; | auto
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>in-flow block-level elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed value:</em>
      <td>Same as specified value
</table>

<p>This property describes how many columns the element spans in the nearest multicol ancestor in the same block formatting context. These values only apply to page floats.

<dl>

<dt>none
<dd>the element does not span multiple columns.

<dt>all
<dd>the element spans across all columns.

<dt>&lt;number&gt;
<dd>The page float spans across the number of columns specified. If a decimal number is specified, the fraction indicates how much of the next column gap and/or the next column which is to be spanned; a fraction up to 0.5 indicates a linear fraction of the column gap, while a fraction between 0.5 and 1.0 indicate the column gap plut a linear fraction of the next column. 

<dt>&lt;length&gt;
<dd>the length value determins how many columns the page float will span, rounding upwards to an integer number of columns

<dt>auto
<dd>the intrinsic width of the page float determines how many columns it will span, rounding upwards to an integer number of columns

</dl>

<p>If the resulting number of columns is equal to, or larger than the number of columns in the multicol element, the number of columns spanned will be the same as if 'column-span: all' had been specified. 

<p>In the line direction, the rectangle described by this property is, by default, placed at the start of the resulting column, extending in the line direction. However, the rectangle will not normally extend outside the content box of the multicol element. Instead, the rectangle extended in the opposite line direction. (Negative margins and/or 'float-offet' may possibly move the page float outside the content box.)

<div class="example">
<p>In this example, the defer column is the last column on the page. Due to the setting on 'column-span' the page float also covers another column. As it cannot extend outside the content box of the multicol element, it must extend to the left into column 2.

<pre>img { 
  float: top;
  column-span: 2;
  float-defer-column: last;
}
</pre>

<p>Here is a possible rendering:
<!--
<pre class=lineart>
  ┌──────────┬┬┬───────────────────────┐
  │          │││                       │
  │ column 1 │││      image spans      │
  │          │││      two columns      │
  │          │││                       │
  │          ││├──────────┬┬┬──────────┤
  │          │││ column 2 │││ column 3 │
  │          │││          │││          │
  └──────────┴┴┴──────────┴┴┴──────────┘
</pre>
-->
<img src="8.png">
</div>

<div class="example">
<p>This example is a variation of the previous example, showing how the page float grows in the oppsite of the line direction.

<pre>img { 
  float: top;
  column-span: 1.75;
  float-defer-column: last;
}
</pre>

<p>Here is a possible rendering:

<img src="35.png">
</div>



<!--
<div class=example>
<p>In this example, a commonly used newspaper layout is easily described:
<pre>
body { columns: 3 }
img  { float: top; column-span: 2; width: 100% }  /* image spans two columns */
p.one { float: top; column-span: 2 }              /* lead paragraph spans two columns */
</pre>

<pre class=lineart>
┌──────────────────────┐┌──────────┐
│                      ││          │
│         img          ││    4     │	          
│                      ││          │   
└──────────────────────┘│          │
┌──────────────────────┐│          │
│        p.one         ││          │   
└──────────────────────┘│          │
┌──────────┐┌──────────┐│          │
│     2    ││    3     ││          │   
└──────────┘└──────────┘└──────────┘
</pre>
</div>
-->

<div class="example">

<p>Float figure to top of its column, spanning all columns:

<pre>.figure { float: top; column-span: all }
</pre>

<img src="15.png" alt="sample redering">

</div>


<div class="example">
<pre>figure { 
  float: top;
  float-defer-column: last;
  column-span: 1.25;
}
</pre>

<img src="30.png">
</div>

<div class="example">
<pre>figure { 
  float: top;
  float-defer-column: last;
  column-span: 1.5;
}
</pre>
<img src="31.png">
</div>




<h2 id="combo-floats"><span class="secno">4 </span>Combo floats</h2>

<p>Page floats are floats that primarily move in the block direction,
while normal float primarily move in the line direction. By setting
two keywords, floats can be set to move in both directions. These are
called combo floats.

<pre>Syntax: [ top | bottom | top-bottom | bottom-top | snap() ] || [ left | right | inside | outside ]</pre>

<div class="example">
<pre>float: top left
</pre>
</div>



<h3 id="page-float-policy"><span class="secno">4.1 </span>Page float policy</h3>

<table class="propdef">
    <tr>

      <td><em>Name:</em>
      <td><dfn id="float-policy">float-policy</dfn>
    <tr>
      <td><em>Value:</em>
      <td>normal | not-last
    <tr>
      <td><em>Initial:</em>
      <td>normal
    <tr>
      <td><em>Applies to:</em>
      <td>page floats
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed value:</em>
      <td>specified value
</table>

<p>Values are:

<dl>
<dt>normal
<dd>nothing special
<dt>not-last
<dd>treat element as if 'display: none' had been set if its resultant column appears after all other content in the normal flow of the multicol element.
</dl>

<div example="" class="">

<p>Only show pullquotes that appear with other content; we don't want a stack of pullquotes at the end of an article.

<pre>.pullquote { 
   float: top;
   clear: page;
   float-defer-column: 2;
   float-policy: not-last;
}

</pre></div>


<h2 id="wrapping-around-page-floats-and-other-elements"><span class="secno">5 </span>Wrapping around page floats (and other elements)</h2>

<h3 id="wrap-side"><span class="secno">5.1 </span>wrap-side</h3>

<table class="propdef">
    <tr>
      <td><em>Name:</em>
      <td><dfn id="wrap-side-0">wrap-side</dfn>
    <tr>
      <td><em>Value:</em>
      <td>none | [[ all | left | right | top | bottom | line-start | line-end | block-start | block-end | line ] || &lt;integer&gt;? ]
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>page floats (or, perhaps, all floats?)
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed value:</em>
      <td>specified value
</table>

<p>This property indicates whether other content may wrap around a page float:

<dl>
<dt>none
<dd>other content may not wrap around the page float

<dt>all

<dd>other content may wrap around on all sides of the float

<dt>left | right | top | bottom | line-start | line-end | block-start | block-end 
<dd>specifies which side wrapping is allowed
  
<dt>line
<dd>wrapping is allowed on both sides in the line direction.

<dt>&lt;integer&gt;
<dd>specifies the maximum number of lines that may wrap around the float. Must be combined with one keyword that specifies which side(s) wrapping is allowed.

</dl>



<div class="example">

<p>In this example, the image is set to span two columns, but it does not use all available space. 
therefore intrude into the neighboring column. At the bottom of the
middle column is a long word that is clipped in the middle of the
column gap.

<pre>img { float: top; column-span: 2; width: 65%; wrap-side: all }
   /* or */
img { float: top; column-span: 1.70; width: 100%; wrap-side: line }
</pre>


<img src="39.png" alt="sample rendering">

</div>

<div class="example">
<pre>p:first-letter { float: left; font-size: 3em; wrap-side: 1 line }
</pre>

<pre style="height: 3.4cm; width: 4.6cm; font: 14px Georgia; position: relative;"><span style="position: absolute; top: 0; left: 0; font-size: 5.1em">A</span>
<span style="position: absolute; left: 1cm; top: 0.3cm">nd so, away with this</span>
<span style="position: absolute; left: 1.5cm; top: 0.85cm">folly. Science, in-</span>
<span style="position: absolute; left: 1.5cm; top: 1.4cm">stead of being the</span>
<span style="position: absolute; left: 0; top: 1.95cm">enemy of poetry, is its quar-</span>
<span style="position: absolute; left: 0; top: 2.5cm">termaster and commissary.</span>
</pre>

</div>


<h3 id="wrap-contrast"><span class="secno">5.2 </span>wrap-contrast</h3>

<table class="propdef">
    <tr>
      <td><em>Name:</em>
      <td><dfn id="wrap-contrast-0">wrap-contrast</dfn>
    <tr>
      <td><em>Value:</em>
      <td>normal | [ &lt;number&gt; &lt;length&gt;?
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>page floats (or, perhaps, all floats?)
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed value:</em>
      <td>specified value
</table>

<p>This property specifies the minimum contrast. Values are:

<dl>

<dt>normal
<dd>a reasonable default value is set, based on the avarage eyesight of 48-year old males, TBD.

<dt>&lt;number&gt;
<dd>a number where '0' represents no contrast (thereby allowing other content to intrude the entire float), and '1' represents a maximum contrast only achieveable between black and white (is this correct?)

<dt>&lt;length&gt;
<dd>specifies the minimum distance from the edge of the contrast line to the start of the intruding content. If not specified, this value is '1em'.

</dl>


<div class="example">
<p>In this example, text wraps around all sides which have enough contrast.

<pre>article {
  columns: 15em;
}
figure { 
  float: bottom;
  wrap-side: all;
  wrap-contrast: 0.5 1em;
}
</pre>

<p><img src="landscape-4col.png" style="width: 90%; border: thin solid black">
</div>


<h2 id="pullquotes"><span class="secno">6 </span>Pullquotes</h2>

<p>This section sketches various techniques for achieving pull quotes and other content that 

<div class="example">
<p>Moving an element down.

<img src="38.png">

<pre>.pullquote {
  float: top;
  float-defer-column: last;
  float-defer-line: 2;
}

.pullquote {
  float: top;
  float-defer-column: last;
  float-offset: 2li;
}

.pullquote {
  float: top;
  float-defer-column: last;
  float-offset: 2li;
}
</pre>
</div>

<!--

.pullquote {
  float: top;
  float-defer-column: last;
  float-offset-y: 2;
}
.pullquote {
  float: top;
  float-defer-column: last;
  top: 2;
}
.pullquote {
  float: top;
  float-defer-column: last;
  left: 3em;
  top: 2;
  wrap-side: line-start;
}
.pullquote {
  float: top;
  float-defer-column: last;
  float-offset-x: 3em;
  float-offset-y: 2;
  wrap-side: line-start;
}


.pullquote {
  float: top;
  float-defer-column: last;
  float-defer-line: 2;
  float-outside: 3em; /* floats towards the outside of the multicol element */
  wrap-side: left;
}
.pullquote {
  width: 120%; /* relative to column width */
  float: top;
  float-defer-column: last;
  float-offset-y: 2;
  float-offset-x: 50%;
  wrap-side: line-start;
}


-->


<div class="example">
<p>Moving an element down and toward the outside:

<img src="36.png">

<pre>.pullquote {
  float: top outside;
  float-defer-column: last;
  float-defer-line: 2;
  float-offset: -2em;
}

.pullquote {
  float: top;
  float-defer-column: last;
  float-offset: 2li 3em;
  wrap-side: line-start;
}

.pullquote {
  float: top;
  float-defer-column: last;
  float-defer-line: 2;
  float-offset: 3em outside;
  wrap-side: line-start;
}

.pullquote {
  float: top;
  float-defer-column: last;
  float-offset: 2 bottom, 3em outside;
  wrap-side: left;
}

</pre>
</div>

<div class="example">
<p>Moving an element down and to the outside, so that the element is half way down, and half of the pullquote is outside the BFC:

<img src="37.png">

<pre>.pullquote {
  width: 120%; /* relative to column width */
  float: top;
  float-defer-column: last;
  float-defer-line: 50%;
  float-offset: -50%; /* relative to page float width */
  wrap-side: line-start;
}

.pullquote {
  width: 120%; /* relative to column width */
  float: top;
  float-defer-column: last;
  float-defer-line: 2;
  float-outside: 50%; /* floats towards the outside of the multicol element */
  wrap-side: left;
}

.pullquote {
  width: 120%; /* relative to column width */
  float: top;
  float-defer-column: last;
  float-offset: 2 bottom, 50% outside;
  wrap-side: left;
}

.pullquote {
  width: 120%; /* relative to column width */
  float: top;
  float-defer-column: last;
  top: 2;
  left: 50%;
  wrap-side: line-start;
}
</pre>
</div>



<h2 class="no-num" id="references">References</h2>

<div id="anolis-references"><dl><dt id="refsRFC2119">[RFC2119]
<dd><cite><a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a></cite>, Scott Bradner. IETF.

</dl></div>

<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

<p>This document has been improved by Bert Bos, Michael Day, Melinda
Grant, David Baron, Markus Mielke, Steve Zilles, Ian Hickson, Elika
Etemad, Laurens Holst, Mike Bremford, Allan Sandfeld Jensen, Kelly
Miller, Werner Donné, Tarquin (Mark) Wilton-Jones, Michel Fortin,
Christian Roth, Brady Duga, Del Merritt, Ladd Van Tol, Tab Atkins Jr.,
Jacob Grundtvig Refstrup,  James Elmore, Ian Tindale, Murakami Shinyu, Paul E.
Merrell, Philip Taylor, Brad Kemper, Peter Linss, Daniel Glazman, Tantek Çelik, Florian Rivoal, Alex Mogilevsky, Simon Sapin, Cameron McCormack, Liam R E Quin, Peter Moulder, Morten Stenshorne, Rune Lillesveen, Lars Erik Bolstad, Anton Prowse, Michel Onoff</p>


























</html><!--
<h2>Regions and Exclusions examples</h2>

<div class=example>
<img src=exclusion_ordering.png>
<pre>
article {
  columns: 15em;
}
article::region(1-3) {
  width: 15em;
  height: 15em;
}
article::region(2-3) {
  margin: 4em 0 0 -4em;
}
</pre>
</div>

<div class=example>
<img src=exclusion_ordering_z_order.png>
<pre>
article {
  columns: 15em;
}
acticle::region(1-3) {
  height: 15em;
}
acticle::region(2-3) {
  margin: 4em 0 0 -4em;
}
acticle::region(2) {
  z-index: 1;
}
</pre>
</div>
--><!--
<div class=example>
<pre>
  article { columns: 14em; }
  article::column(1) {
     position: absolute;
     font-size: 1.2em;
     visibility: collapse; /* makes space available others to use */
     ...
  }
</pre>
</div>
--><!--
<div class=example>
Consider this markup:

<pre>
&lt;div class=text>
&lt;div lang=en>
Some words in English ...
&lt;/div>
&lt;div lang=fr>
Quelques mots en Francaise...
&lt;/div>
&lt;/div>
</pre>

<p>Here is the CSS code to lay these out into two columns with
different background colors:

<pre>
div.text {
  columns: 32em;
}

div:lang(en) {
  display: table-cell;
  color: black; background: white;
}

div:lang(fr) {
  display: table-cell;
  color: white; background: black;
}
</pre>

<p>This example shows that use cases that first seem to require regions may be achieved with other methods.

</div>
--><!--

<h2>Regions</h2>

<p>Regions are series of stylable boxes into which content can be
poured. Columns are regions that are automatically generated to
contain all the content of the the multicol element. By adding
selectors for columns, columns can be styled and positioned and
thereby escape the rigid patterns that columns naturally live in.


<div class=example>
<pre>
div.chapter::column(3)       /* the 3rd column of the element */
div.chapter::column(2n)      /* all even columns of the element */
div.chapter::column(3+)      /* all columns but the 1st and 2nd */
div.chapter::column(2,2)     /* second column on second page */
div.chapter::column(*,2)     /* all columns on the second page */
div.chapter::column(1,*)     /* the first column on all pages */
</pre>
</div>


<p>To underline the fact that columns are regions, the "region" keyword can be used as a substitute for "column".


<div class=example>
<pre>
div.chapter::region(3)       /* the 3rd region of the element */
div.chapter::region(2n)      /* all even regions of the element */
div.chapter::region(3+)      /* all regions but the 1st and 2nd */
div.chapter::region(2,2)     /* second region on second page */
div.chapter::region(*,2)     /* all regions on the second page */
div.chapter::region(1,*)     /* the first column on all pages */
</pre>
</div>


<div class=example>
<img alt="sample rendering" src=regions.png>

<p>In this example, the multicol layout is changed so that the image (which appears first in the markup) spans two columns and is floated to the top, thereby escaping its natural column. The first column, which holds the start of the textual content is also floated to the top, spanning two columns, and therefore ends up just under the image. When the first column/region is floated away, the second column will move into its space.

<pre>
article { columns: 3 }
img { column-span: 2; width: 100%; float: top }
article::region(1) {    /* selects column 1 */
  column-span: 2;
  float: top;
  height: 3em;          /* sets preferred height of region */
}

&lt;article>
  &lt;img ...>
  &lt;p>...  &lt;p>...  &lt;p>...
&lt;/article>
</pre>
</div>


<div class=example>
<pre>
div.chapter::region(1) {
  transform: rotate(6.5deg);
}
div.chapter::region(2) {
  transform: rotate(-5.5deg) translate(0, 40px);
}
</pre>

<img src="regions_rotated_columns.jpg">
</div>

--><!--
<h2>Wrapping around text</h2>

<P>A new property. 'wrap-level', is introduced to allow wraps around the rendered content of the element.

<div class=example>
<img style="border: thin solid black" src=dropcaps.png>
<pre>
#dropcaps {
  font-size: 3em;
  float: left;
  wrap-level: 0.5;
  margin-top: -0.2em;
}
&lt;p>&lt;span id="dropcaps">Many&lt;/span> instances ...&lt;/p>
    &lt;p>The text ....&lt;/p>
</pre>
</div>

<p class=issue>Define behavior if both 'wrap-level' and 'background-wrap-level' is set.

<p class=issue>Some kind of spacing behavior must be defined; 'wrap-margin' may be an option.


<!--
<h3>Exclusions based on shapes</h3>

<p class=issue>I suggest not having exclusions based in shapes in the first generation of exclusions; we may want to definde shapes for CSS in general (e.g., for borders), so we may want to wait until we have a holistic approach.

<div class=example>
<img src=heart1.png>
<pre>
article::column(1) {
  content-inside: circle(50%, 50%, 30%);
}

article::column(2) {
  content-outside: polygon(x1, y1, x2, y2, x3, y3, ... xn, yn);
  color: red;
}
</pre>
</div>

<div class=example>
<img src=heart2.png>
<pre>
article::column(1) {
  content-outside: circle(x, y, z);
}
article::column(2) {
  content-inside: polygon(x1, y1, x2, y2, x3, y3, ... xn, yn);
}
</pre>
</div>

--><!--
<h2>Wrapping around background</h2>

<p>Exclusions are often based on shapes found in images. In this specification, background image can carry the shape, around which text is wrapped. The new property 'background-exclude-level' indicates a level in the alpha channel of the background image(s) that defines the shape.


<div class=example>
<p>Here is an example that wraps text based on the background of the element.

<p><img style="width: 90%; border: thin solid black" src=landscape-4col.png>

<pre>
article {
  columns: 15em;
  background: url(horizon.jpg);
  background-wrap-level: 0.5;
}
</pre>

</div>

<!--
<div class=example>
<p>This example is the same as the above, just with changed column widths.
<img src=car2.jpg>
<pre>
article {
  padding: 4em;
  columns: 6em;
  background: url(background.jpg);
  background-exclude-level: 0.5;
}
article h1 { column-span: all } /* Bonneville Speedway */
</pre>
</div>

<p>Background images can be repeated. Therefore exclusions based on images can be repeated.

<div class=example>

<img src=exclusions_repeating.jpg>

<pre>
article {
  background: repeat-y url(zigzag.png);
  background-exclude-level: 0.5;
}
article h1 {
  column-span: all;
}
</pre>

</div>
--><!--
<pre>
.pullquote {
  float: positioned;
  left: 5em;
  clear-side: none;
}
</pre>

<pre>
.pullquote {
  float: center;
}
</pre>


</div>
--><!--
<div class=example>
<img width=213 src="exclusion_wrap_side_both.png">


<pre>
.pullquote {
  float: center;
  clear-side: none;
}
</pre>


<pre>
.pullquote {
  float: left;
  float-offset: 50%;
  clear-side: none;
}
</pre>
--><!--
<h3>The 'clear-side' property</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>clear-side</dfn>
    <tr>
      <td><em>Value:</em>
    <td>auto | left | right | both
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>floated elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual, paged
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified
</table>

<p>This property declares if the side of a float should be cleared of
content. Values have the following meaning:


<dl>
<dt>auto
<dd>if the float is left-floated, there should be no content to the left; if the float is right-floated, there should be no content to the right

<dt>left
<dd>there should be no content to the left of the float
<dt>right
<dd>there should be no content to the right of the float
<dt>none
<dd>there may be content on either side of the float
</dl>

<!--
<h3>Pull-quotes</h3>

<div class=example>
<img width=213 src="exclusion_wrap_side_left.png">

<pre>
.pullquote {
  float: right;
  float-offset: 5em;
}
</pre>

<pre>
.pullquote {
  float: right;
  float-offset: 50%;
}
</pre>


</div>

<div class=example>
<p><img width=213 src="exclusion_wrap_side_right.png">

<pre>
.pullquote {
  float: left;
  float-offset: 5em;
}
</pre>

<pre>
.pullquote {
  float: left;
  float-offset: 50%;
}
</pre>

<pre>
.pullquote {
  float: center;
  clear-side: left;
}
</pre>

</div>

<pre>
.pullquote {
  float: left;
  float-offset: 50%; /* center */
}
</pre>

--><!--
<h3 id="the-float-offset-property"><span class="secno">3.1 </span>The 'float-offset' property</h3>

<table class="propdef">
    <tr>
      <td><em>Name:</em>
      <td><dfn id="float-offset">float-offset</dfn>
    <tr>
      <td><em>Value:</em>
    <td>&lt;length&gt; &lt;length&gt; ?
    <tr>
      <td><em>Initial:</em>
      <td>0 0
    <tr>
      <td><em>Applies to:</em>
      <td>floated elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>see prose
    <tr>
      <td><em>Media:</em>
      <td>visual, paged
    <tr>
      <td><em>Computed value:</em>
      <td>one or two absolute lengths
</table>

<p>This property pushes a float in opposite direction of the where
it has been floated with 'float'. If one value is specified, it is
the horizontal offset. If two values are specified, the first is the
horizontal and the second is the vertical offset. If no vertical value
has been specified, the vertical offset is set to zero.



<p>This property can only influence a float along an axis it has been floated.

<div class="example">
<pre>img {
  float: left;
  float-offset: 2em 3em;
}
</pre>

<p>In this example, the image is floated to the left. Therefore, 'float-offset' may only push the element in the horizontal direction, and the vertical value is ignored.

</div>

<p>Negative values are allowed; a negative values will push the float
in the same direction as it has been floated with 'float'

<p>This property may move floats into other column than where they
naturally appear.

<div class="example">
<p>In this example, the first declaration float the image to the top, while the second pushes it down. 

<pre>img {
  float: top;
  float-offset: 2.5em;
}
</pre>


<img src="24.png" alt="sample rendering">

</div>

<p>Percentage values are computed according to this formula:

<pre>  (containing-block-width - float-width) * percentage
  (containing-block-height - float-height) * percentage
</pre>


<div class=example>
Pull quotes are often centered in a column. In this example, the pull quote is floated to the right, and then pushed back into the center.

<img width=213 src="exclusion_wrap_side_left.png">

<pre>
.pullquote {
  float: right;
  float-offset: 50%; /* 50% centers the box */
}
</pre>

</div>


<p>When negative values are set on this property, the column gap is also part of the calculation:

<pre>  ((containing-block-width + 2 * column-gap) - float-width) * percentage
</pre>

<div class="example">
<pre>img {
  float: top right;
  float-offset: -50% 3em;  /* 50% centers the box */
  width: 120%;
}
</pre>

<img src="11.png" alt="sample rendering">

</div>


<div class="example">

<pre>img {
  float: top right;
  float-offset: -80% 2em;
  width: 100%;
}
</pre>

<img src="12.png" alt="sample rendering">

</div>

<p class="issue">'float-defer-lines' could be an alternative to float offsets
--><!--
│┤╡╢╖╕╣║╗╝╜╛┐C└
┬┴
├─┼╞╟╚╔╩╦╠═╬╧D╨╤╥╙╘╒╓╫╪┘┌
--><!--
<pre class=lineart>
┌──────────────────────────────────────┐
│ ┌──────────┐┌──────────┐┌──────────┐ │
│ │          ││          ││          │ │
│ │     1    ││    2     ││    3     │ │   
│ │          ││          ││          │ │
│ └──────────┘└──────────┘└──────────┘ │
│                                      │
│                                      │
│                                      │
│ ┌──────────────────────────────────┐ │
│ │ footer                           │ │
│ └──────────────────────────────────┘ │
└──────────────────────────────────────┘

┌──────────────────────────────────────┐
│ ┌──────────┐┌──────────┐┌──────────┐ │
│ │          ││          ││          │ │
│ │     1    ││    2     ││    3     │ │   
│ │          ││          ││          │ │
│ └──────────┘└──────────┘└──────────┘ │
│ ┌──────────────────────────────────┐ │
│ │ footer                           │ │
│ └──────────────────────────────────┘ │
│                                      │
│                                      │
│                                      │
│                                      │
└──────────────────────────────────────┘

</pre>
-->